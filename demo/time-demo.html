<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800&display=swap">
    <title>Timepicker Demo 1</title>
</head>

<body onload="generateHours();" style="font-family: 'Poppins', sans-serif;">

    <!--Pointer-->
    <!--STRELKATA E NAD VSQKA CHERTICHKA PREZ 22PX-->
    <div class="d-flex">
        <div class="rounded-5" id="mydiv" style="height: 50px; width: 50px;">
            <i class="bi bi-arrow-down-circle-fill fs-1"></i>
        </div>

        <div class="d-inline-flex position-relative"
            style="background-color: aqua; top: 50px; left: 22px; width: 594px;" id="hour-row">
        </div>
    </div>
    <div class="w-100 justify-content-start mt-5">
        <p class="text-center" id="hour-text">07:00</p>
    </div>


    <script>
        //Make the DIV element draggagle:
        dragElement(document.getElementById("mydiv"));
        function dragElement(elmnt) {
            var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            elmnt.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                // get the mouse cursor position at startup:
                pos3 = e.clientX;
                document.onmouseup = closeDragElement;
                // call a function whenever the cursor moves:
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                // calculate the new cursor position:
                pos1 = pos3 - e.clientX;
                pos3 = e.clientX;
                // set the element's new position:
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
                let hour_text = document.getElementById('hour-text');


                for (let i = 0; i < 27; i++) {
                    console.log(line.style.left);
                    let line = document.getElementById('hour-line' + i);
                    if (elmnt.style.left >= line.style.left && elmnt.style.left <= (line.style.left + line.style.width)) {
                        console.log(availHours[i]);
                        hour_text.innerText = availHours[i];
                        console.log(2);
                    }
                }

                //Setting the borders is not exactly working, its not a feature, its a bug
                /*if(elmnt.style.left < "-50px" || elmnt.style.left > "600px"){
                    closeDragElement();
                }*/
            }

            function closeDragElement() {
                /* stop moving when mouse button is released:*/
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        const availHours = [];
        function generateHours() {
            let addedIndex = 7;
            for (let i = 0; i <= 26; i++) {
                let hourLine = document.createElement('p');
                hourLine.classList.add('px-1')
                hourLine.id = "hour-line" + i;
                if (i % 2 == 0) {
                    availHours[i] = (i + addedIndex).toString() + ":00";
                    addedIndex--;
                    hourLine.classList.add('fs-3');
                }
                else {
                    availHours[i] = (i + addedIndex).toString() + ":30";
                    hourLine.classList.add('fs-4');
                }
                hourLine.innerHTML = '|';
                document.getElementById('hour-row').appendChild(hourLine);
            }
            console.log(availHours);
        }
    </script>
</body>

</html>